webpackJsonp([3],{CM1E:function(e,t){},CTQX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={name:"student",data:function(){return{search_data:{label:"",status:"all"},org_list:[],defaultProps:{children:"children",label:"label"},current_org:null,student:[],new_form:{},newDialogVisible:!1}},created:function(){this.getOrg()},methods:{getOrg:function(){var e=this;this.$axios.get("/account/admin/school/organize",{headers:{token:localStorage.getItem("token")}}).then(function(t){e.org_list=t.data.data}).catch(function(e){console.log(e)})},handleCurrentChange:function(e){this.current_org=e,this.getStudent()},search:function(){this.getStudent()},getStudent:function(){var e=this;this.$axios.get("/account/admin/school/student?id="+e.current_org.id+"&label="+e.search_data.label+"&status="+e.search_data.status,{headers:{token:localStorage.getItem("token")}}).then(function(t){e.student=t.data.data}).catch(function(e){console.log(e)})},addNewDialog:function(){console.log(this.current_org),null===this.current_org?this.$message.error("请先选择一个院系"):(this.new_form.label=this.current_org.label,this.newDialogVisible=!0)},add:function(){console.log(this.new_form);var e=this,t={organize:e.current_org.id,name:e.new_form.name,identify:e.new_form.identify,number:e.new_form.number,verify:e.new_form.verify};this.$axios.post("/account/admin/school/student",t,{headers:{token:localStorage.getItem("token")}}).then(function(t){0===t.data.code?(e.getStudent(),e.$message.success("添加成功")):e.$message.error("添加失败"),e.addNewDialog=!1}).catch(function(t){e.$message.error("添加失败"),console.log(t),e.addNewDialog=!1})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"student"}},[a("div",{attrs:{id:"org"}},[a("el-table",{staticClass:"el-table_header",attrs:{data:e.org_list,"row-key":"id",border:"","default-expand-all":"","highlight-current-row":"","max-height":"900","tree-props":{children:"children",hasChildren:"hasChildren"}},on:{"current-change":e.handleCurrentChange}},[a("el-table-column",{attrs:{prop:"label",label:"院系"}})],1)],1),e._v(" "),a("el-divider",{attrs:{direction:"vertical"}}),e._v(" "),a("div",{attrs:{id:"student-content"}},[a("div",{attrs:{id:"studnet-search"}},[a("el-form",{staticClass:"search-form-line",attrs:{inline:!0,model:e.search_data}},[a("el-form-item",{attrs:{label:"姓名："}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:e.search_data.label,callback:function(t){e.$set(e.search_data,"label",t)},expression:"search_data.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-select",{attrs:{placeholder:"使用状态"},model:{value:e.search_data.status,callback:function(t){e.$set(e.search_data,"status",t)},expression:"search_data.status"}},[a("el-option",{attrs:{label:"所有",value:"all"}}),e._v(" "),a("el-option",{attrs:{label:"已认证",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"未认证",value:"false"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addNewDialog}},[e._v("添加")])],1)],1)],1),e._v(" "),a("div",{attrs:{id:"student-table"}},[a("el-table",{staticClass:"el-table_hader",attrs:{data:e.student,"row-key":"number",stripe:"",border:""}},[a("el-table-column",{attrs:{width:"120",label:"学号",prop:"number"}}),e._v(" "),a("el-table-column",{attrs:{width:"80",label:"姓名",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"状态",prop:"verify"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"身份证号",prop:"identify"}}),e._v(" "),a("el-table-column",{attrs:{width:"120",label:"手机号",prop:"phone"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"更新时间",prop:"update_time"}}),e._v(" "),a("el-table-column",{attrs:{width:"100",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.addEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteNode(t.row)}}})]}}])})],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:"新增学生",visible:e.newDialogVisible,width:"50%",height:"50%"},on:{"update:visible":function(t){e.newDialogVisible=t}}},[[a("el-form",{attrs:{model:e.new_form,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"院系名称："}},[a("el-input",{attrs:{disabled:""},model:{value:e.new_form.label,callback:function(t){e.$set(e.new_form,"label",t)},expression:"new_form.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{model:{value:e.new_form.number,callback:function(t){e.$set(e.new_form,"number",t)},expression:"new_form.number"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.new_form.name,callback:function(t){e.$set(e.new_form,"name",t)},expression:"new_form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证号"}},[a("el-input",{model:{value:e.new_form.identify,callback:function(t){e.$set(e.new_form,"identify",t)},expression:"new_form.identify"}})],1)],1)],e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.newDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var r=a("VU/8")(l,n,!1,function(e){a("CM1E")},"data-v-57a1ffe5",null);t.default=r.exports}});
//# sourceMappingURL=3.877304e134c73f437bc7.js.map