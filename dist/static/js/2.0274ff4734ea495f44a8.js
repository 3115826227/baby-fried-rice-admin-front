webpackJsonp([2],{igl9:function(e,t){},n6Gs:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"oranize",data:function(){return{search_data:{label:"",status:"all"},newDialogVisible:!1,editDialogVisible:!1,new_form:{},parent_node:{},edit_form:{},data:[],defaultProps:{children:"children",label:"label"}}},created:function(){this.getOrg()},methods:{getOrg:function(){var e=this;this.$axios.get("/account/admin/school/organize",{headers:{token:localStorage.getItem("token")}}).then(function(t){e.data=t.data.data,console.log(e.data)}).catch(function(e){console.log(e)})},handleCheckChange:function(e,t,a){console.log(e,t,a)},handleNodeClick:function(e){console.log(e)},addNewDialog:function(e){this.newDialogVisible=!0,this.new_form.school_id=e.school_id,this.new_form.parent_id=e.id,this.new_form.parent_label=e.label,this.new_form.status="true"},addEditDialog:function(e){this.editDialogVisible=!0,this.edit_form=e,this.edit_form.parent_id=e.parent_id,this.findNode(e.parent_id,this.data),this.edit_form.parent_label=this.parent_node.label,this.parent_node={}},addStopDialog:function(e){this.stopDialogVisible=!0},addNode:function(){var e=this,t={school_id:e.new_form.school_id,label:e.new_form.label,parent_id:e.new_form.parent_id,status:e.new_form.status};console.log(t),this.$axios.post("/account/admin/school/organize",t,{headers:{token:localStorage.getItem("token")}}).then(function(t){0===t.data.code?(e.getOrg(),e.newDialogVisible=!1,e.$message.success("添加成功")):(e.newDialogVisible=!1,e.$message.error("添加失败"))}).catch(function(t){e.newDialogVisible=!1,e.$message.error("添加失败"),console.log(t)})},editNode:function(){var e=this;console.log(e.edit_form);var t={id:e.edit_form.id,label:e.edit_form.label};this.$axios.put("/account/admin/school/organize",t,{headers:{token:localStorage.getItem("token")}}).then(function(t){0===t.data.code?(e.getOrg(),e.editDialogVisible=!1,e.$message.success("修改成功")):(e.editDialogVisible=!1,e.$message.error("修改失败"))}).catch(function(t){e.editDialogVisible=!1,e.$message.error("修改失败"),console.log(t)})},deleteNode:function(e){var t=this,a=this;this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete("/account/admin/school/organize?id="+e.id,{headers:{token:localStorage.getItem("token")}}).then(function(e){0===e.data.code?(a.getOrg(),a.$message.success("删除成功！")):a.$message.error("删除失败！")}).catch(function(e){a.$message.error("删除失败！"),console.log(e)})}).catch(function(){a.$message.info("取消操作！")})},stopNode:function(){this.stopDialogVisible=!1},findNode:function(e,t){for(var a=0;a<t.length;a++)String(t[a].id)===e&&(this.parent_node=t[a]),null!=t[a].children&&this.findNode(e,t[a].children)},search:function(){var e=this;this.$axios.get("/account/admin/school/organize?label="+e.search_data.label+"&status="+e.search_data.status,{headers:{token:localStorage.getItem("token")}}).then(function(t){0===t.data.code&&(e.data=t.data.data)}).catch(function(e){console.log(e)})},handleUpdate:function(e,t){var a=this,o=this,l="",i=void 0;!1===t.status?(l="停用",i="false"):(l="开启",i="true"),console.log(i),this.$confirm("是否确认此操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e={id:t.id,status:i};o.$axios.put("/account/admin/school/organize/status",e,{headers:{token:localStorage.getItem("token")}}).then(function(e){0===e.data.code?(o.getOrg(),o.$message.success(l+"成功")):this.$message.error(l+"失败！")}).catch(function(e){this.$message.error(l+"失败！"),console.log(e)})}).catch(function(){a.$message.info("取消操作！")})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"organize"}},[a("div",{attrs:{id:"search"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.search_data}},[a("el-form-item",{attrs:{label:"院系："}},[a("el-input",{attrs:{placeholder:"院系"},model:{value:e.search_data.label,callback:function(t){e.$set(e.search_data,"label",t)},expression:"search_data.label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"使用状态："}},[a("el-select",{attrs:{placeholder:"使用状态"},model:{value:e.search_data.status,callback:function(t){e.$set(e.search_data,"status",t)},expression:"search_data.status"}},[a("el-option",{attrs:{label:"所有",value:"all"}}),e._v(" "),a("el-option",{attrs:{label:"正常",value:"true"}}),e._v(" "),a("el-option",{attrs:{label:"停用",value:"false"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1)],1)],1),e._v(" "),a("div",{attrs:{id:"orgTree"}},[a("el-table",{staticClass:"el-table_header",attrs:{data:e.data,"row-key":"id",border:"","default-expand-all":"",stripe:"","max-height":"540","tree-props":{children:"children",hasChildren:"hasChildren"}}},[a("el-table-column",{attrs:{width:"280",prop:"label",label:"院系"}}),e._v(" "),a("el-table-column",{attrs:{width:"150",prop:"count",label:"学生人数"}}),e._v(" "),a("el-table-column",{attrs:{width:"220",prop:"status",label:"使用状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"正常","inactive-text":"停用"},on:{change:function(a){return e.handleUpdate(t.$index,t.row)}},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"scope.row.status"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{width:"200",prop:"update_time",label:"更新时间"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(a){return e.addNewDialog(t.row)}}},[e._v("新增")]),e._v(" "),a("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.addEditDialog(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteNode(t.row)}}})]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"新增院系",visible:e.newDialogVisible,width:"50%",height:"50%"},on:{"update:visible":function(t){e.newDialogVisible=t}}},[[a("el-form",{attrs:{model:e.new_form,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"上级院系："}},[a("el-input",{attrs:{disabled:""},model:{value:e.new_form.parent_label,callback:function(t){e.$set(e.new_form,"parent_label",t)},expression:"new_form.parent_label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"院系名称："}},[a("el-input",{model:{value:e.new_form.label,callback:function(t){e.$set(e.new_form,"label",t)},expression:"new_form.label"}})],1),e._v(" "),a("el-form-item",{staticStyle:{"text-align":"left"},attrs:{label:"使用状态："}},[a("el-radio-group",{model:{value:e.new_form.status,callback:function(t){e.$set(e.new_form,"status",t)},expression:"new_form.status"}},[a("el-radio",{attrs:{label:"true"}},[e._v("正常")]),e._v(" "),a("el-radio",{attrs:{label:"false"}},[e._v("停用")])],1)],1)],1)],e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.newDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addNode}},[e._v("确 定")])],1)],2),e._v(" "),a("el-dialog",{attrs:{title:"修改院系",visible:e.editDialogVisible,width:"50%",height:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[[a("el-form",{attrs:{model:e.edit_form,"label-width":"20%","label-position":"right"}},[a("el-form-item",{attrs:{label:"上级院系："}},[a("el-input",{attrs:{disabled:""},model:{value:e.edit_form.parent_label,callback:function(t){e.$set(e.edit_form,"parent_label",t)},expression:"edit_form.parent_label"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"院系名称："}},[a("el-input",{model:{value:e.edit_form.label,callback:function(t){e.$set(e.edit_form,"label",t)},expression:"edit_form.label"}})],1)],1)],e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editNode}},[e._v("确 定")])],1)],2)],1)},staticRenderFns:[]};var i=a("VU/8")(o,l,!1,function(e){a("igl9")},"data-v-ff830d6a",null);t.default=i.exports}});
//# sourceMappingURL=2.0274ff4734ea495f44a8.js.map